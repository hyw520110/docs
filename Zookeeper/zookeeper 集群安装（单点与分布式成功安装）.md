<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">参考</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">http://www.blogjava.net/hello-yun/archive/2012/05/03/377250.html</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">ZooKeeper是一个分布式开源框架，提供了协调分布式应用的基本服务，它向外部应用暴露一组通用服务――分布式同步（Distributed Synchronization）、命名服务（Naming Service）、集群维护（Group Maintenance）等，简化分布式应用协调及其管理的难度，提供高性能的分布式服务。ZooKeeper本身可以以Standalone模式安装运行，不过它的长处在于通过分布式ZooKeeper集群（一个Leader，多个Follower），基于一定的策略来保证ZooKeeper集群的稳定性和可用性，从而实现分布式应用的可靠性。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">有关ZooKeeper的介绍，网上很多，也可以参考文章后面，我整理的一些相关链接。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">下面，我们简单说明一下ZooKeeper的配置。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<h2 style="margin:0px;font-size:1em;font-family:Arial;line-height:26px;white-space:normal;padding:0px;">ZooKeeper Standalone模式</h2>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">从Apache网站上（zookeeper.apache.org）下载ZooKeeper软件包，我选择了3.3.4版本的（zookeeper-3.3.4.tar.gz），在一台Linux机器上安装非常容易，只需要解压缩后，简单配置一下即可以启动ZooKeeper服务器进程。</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">将zookeeper-3.3.4/conf目录下面的<span style="white-space:pre;"> zoo_sample.cfg</span>修改为zoo.cfg，配置文件内容如下所示：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">tickTime=2000&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">dataDir=/home/hadoop/storage/zookeeper&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">clientPort=2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">initLimit=5&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">syncLimit=2&nbsp;&nbsp;</span></p></li>
</ol>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">上面各个配置参数的含义也非常简单，引用如下所示：</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">tickTime&nbsp;――&nbsp;the&nbsp;basic&nbsp;time&nbsp;unit&nbsp;in&nbsp;milliseconds&nbsp;used&nbsp;by&nbsp;ZooKeeper.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;do&nbsp;heartbeats&nbsp;and&nbsp;the&nbsp;minimum&nbsp;session&nbsp;timeout&nbsp;will&nbsp;be&nbsp;twice&nbsp;the&nbsp;tickTime.&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">dataDir&nbsp;――&nbsp;the&nbsp;location&nbsp;to&nbsp;store&nbsp;the&nbsp;in-memory&nbsp;database&nbsp;snapshots&nbsp;and,&nbsp;unless&nbsp;specified&nbsp;otherwise,&nbsp;the&nbsp;transaction&nbsp;log&nbsp;of&nbsp;updates&nbsp;to&nbsp;the&nbsp;database.&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">clientPort&nbsp;――&nbsp;the&nbsp;port&nbsp;to&nbsp;listen&nbsp;for&nbsp;client&nbsp;connections&nbsp;&nbsp;</span></p></li>
</ol>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">下面启动ZooKeeper服务器进程：</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">cd&nbsp;zookeeper-3.3.4/&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">bin/zkServer.sh&nbsp;start&nbsp;&nbsp;</span></p></li>
</ol>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">通过jps命令可以查看ZooKeeper服务器进程，名称为QuorumPeerMain。</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;">在客户端连接ZooKeeper服务器，执行如下命令：</p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">bin/zkCli.sh&nbsp;-server&nbsp;dynamic:2181&nbsp;&nbsp;</span></p></li>
</ol>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">上面dynamic是我的主机名，如果在本机执行，则执行如下命令即可：</span><br style="font-family:Arial;font-size:14px;line-height:26px;white-space:normal;"></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">bin/zkCli.sh&nbsp;&nbsp;</span></p></li>
</ol>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">客户端连接信息如下所示：</span></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;font-family:Arial;font-size:14px;line-height:26px;white-space:normal;padding:0px;"><br></p>
<p><span style="font-family:Arial;font-size:14px;line-height:26px;background-color:rgb(255,255,255);">接着，可以使用help查看Zookeeper客户端可以使用的基本操作命令。</span><br style="font-family:Arial;font-size:14px;line-height:26px;white-space:normal;"><br style="font-family:Arial;font-size:14px;line-height:26px;white-space:normal;"><br style="font-family:Arial;font-size:14px;line-height:26px;white-space:normal;"><br style="font-family:Arial;font-size:14px;line-height:26px;white-space:normal;"></p>
<h2 style="margin:0px;font-size:1em;padding:0px;">ZooKeeper Distributed模式</h2>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">ZooKeeper分布式模式安装（ZooKeeper集群）也比较容易，这里说明一下基本要点。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">首先要明确的是，ZooKeeper集群是一个独立的分布式协调服务集群，“独立”的含义就是说，如果想使用ZooKeeper实现分布式应用的协调与管理，简化协调与管理，任何分布式应用都可以使用，这就要归功于Zookeeper的数据模型（Data Model）和层次命名空间（Hierarchical Namespace）结构，详细可以参考<a href="http://zookeeper.apache.org/doc/trunk/zookeeperOver.html" style="color:rgb(255,153,0);text-decoration:none;" target="_blank">http://zookeeper.apache.org/doc/trunk/zookeeperOver.html</a>。在设计你的分布式应用协调服务时，首要的就是考虑如何组织层次命名空间。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">下面说明分布式模式的安装配置，过程如下所示：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>第一步：主机名称到IP地址映射配置</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">ZooKeeper集群中具有两个关键的角色：Leader和Follower。集群中所有的结点作为一个整体对分布式应用提供服务，集群中每个结点之间都互相连接，所以，在配置的ZooKeeper集群的时候，每一个结点的host到IP地址的映射都要配置上集群中其它结点的映射信息。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">例如，我的ZooKeeper集群中每个结点的配置，以slave-01为例，/etc/hosts内容如下所示：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">192.168.0.179&nbsp;&nbsp;&nbsp;slave-01&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">192.168.0.178&nbsp;&nbsp;&nbsp;slave-02&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">192.168.0.177&nbsp;&nbsp;&nbsp;slave-03&nbsp;&nbsp;</span></p></li>
</ol>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">ZooKeeper采用一种称为Leader election的选举算法。在整个集群运行过程中，只有一个Leader，其他的都是Follower，如果ZooKeeper集群在运行过程中Leader出了问题，系统会采用该算法重新选出一个Leader。因此，各个结点之间要能够保证互相连接，必须配置上述映射。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">ZooKeeper集群启动的时候，会首先选出一个Leader，在Leader election过程中，某一个满足选举算的结点就能成为Leader。整个集群的架构可以参考<a href="http://zookeeper.apache.org/doc/trunk/zookeeperOver.html#sc_designGoals" style="color:rgb(255,153,0);text-decoration:none;" target="_blank">http://zookeeper.apache.org/doc/trunk/zookeeperOver.html#sc_designGoals</a>。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>第二步：修改ZooKeeper配置文件</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">在其中一台机器（slave-01）上，解压缩zookeeper-3.3.4.tar.gz，修改配置文件conf/zoo.cfg，内容如下所示：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">tickTime=2000&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">dataDir=/home/hadoop/storage/zookeeper&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">clientPort=2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">initLimit=5&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">syncLimit=2&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">server.1=slave-01:2888:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">server.2=slave-02:2888:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">server.3=slave-03:2888:3888&nbsp;&nbsp;</span></p></li>
</ol>
<p>上述配置内容说明，可以参考<a href="http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html#sc_RunningReplicatedZooKeeper" style="color:rgb(255,153,0);text-decoration:none;" target="_blank">http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html#sc_RunningReplicatedZooKeeper</a>。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>第三步：远程复制分发安装文件</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">上面已经在一台机器slave-01上配置完成ZooKeeper，现在可以将该配置好的安装文件远程拷贝到集群中的各个结点对应的目录下：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">cd&nbsp;/home/hadoop/installation/&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">scp&nbsp;-r&nbsp;zookeeper-3.3.4/&nbsp;hadoop@slave-02:/home/hadoop/installation/&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">scp&nbsp;-r&nbsp;zookeeper-3.3.4/&nbsp;hadoop@slave-03:/home/hadoop/installation/&nbsp;&nbsp;</span></p></li>
</ol>
<p><strong>第四步：设置myid</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">在我们配置的dataDir指定的目录下面，创建一个myid文件，里面内容为一个数字，用来标识当前主机，conf/zoo.cfg文件中配置的server.X中X为什么数字，则myid文件中就输入这个数字，例如：</p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-01:~/installation/zookeeper-3.3.4$&nbsp;echo&nbsp;"1"&nbsp;&gt;&nbsp;/home/hadoop/storage/zookeeper/myid&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-02:~/installation/zookeeper-3.3.4$&nbsp;echo&nbsp;"2"&nbsp;&gt;&nbsp;/home/hadoop/storage/zookeeper/myid&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-03:~/installation/zookeeper-3.3.4$&nbsp;echo&nbsp;"3"&nbsp;&gt;&nbsp;/home/hadoop/storage/zookeeper/myid&nbsp;&nbsp;</span></p></li>
</ol>
<p>按照上述进行配置即可。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>第五步：启动ZooKeeper集群</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">在ZooKeeper集群的每个结点上，执行启动ZooKeeper服务的脚本，如下所示：</p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-01:~/installation/zookeeper-3.3.4$&nbsp;bin/zkServer.sh&nbsp;start&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-02:~/installation/zookeeper-3.3.4$&nbsp;bin/zkServer.sh&nbsp;start&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-03:~/installation/zookeeper-3.3.4$&nbsp;bin/zkServer.sh&nbsp;start&nbsp;&nbsp;</span></p></li>
</ol>
<p>以结点slave-01为例，日志如下所示：</p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-01:~/installation/zookeeper-3.3.4$&nbsp;tail&nbsp;-500f&nbsp;zookeeper.out&nbsp;&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,117&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeerConfig@90]&nbsp;-&nbsp;Reading&nbsp;configuration&nbsp;from:&nbsp;/home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,133&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeerConfig@310]&nbsp;-&nbsp;Defaulting&nbsp;to&nbsp;majority&nbsp;quorums&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,167&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeerMain@119]&nbsp;-&nbsp;Starting&nbsp;quorum&nbsp;peer&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,227&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:NIOServerCnxn$Factory@143]&nbsp;-&nbsp;binding&nbsp;to&nbsp;port&nbsp;0.0.0.0/0.0.0.0:2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,277&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeer@819]&nbsp;-&nbsp;tickTime&nbsp;set&nbsp;to&nbsp;2000&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,278&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeer@830]&nbsp;-&nbsp;minSessionTimeout&nbsp;set&nbsp;to&nbsp;-1&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,279&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeer@841]&nbsp;-&nbsp;maxSessionTimeout&nbsp;set&nbsp;to&nbsp;-1&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,281&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:QuorumPeer@856]&nbsp;-&nbsp;initLimit&nbsp;set&nbsp;to&nbsp;5&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,347&nbsp;-&nbsp;INFO&nbsp;&nbsp;[Thread-1:QuorumCnxManager$Listener@473]&nbsp;-&nbsp;My&nbsp;election&nbsp;bind&nbsp;port:&nbsp;3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,393&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@621]&nbsp;-&nbsp;LOOKING&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,396&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@663]&nbsp;-&nbsp;New&nbsp;election.&nbsp;My&nbsp;id&nbsp;=&nbsp;&nbsp;1,&nbsp;Proposed&nbsp;zxid&nbsp;=&nbsp;0&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,400&nbsp;-&nbsp;INFO&nbsp;&nbsp;[WorkerReceiver&nbsp;Thread:FastLeaderElection@496]&nbsp;-&nbsp;Notification:&nbsp;1&nbsp;(n.leader),&nbsp;0&nbsp;(n.zxid),&nbsp;1&nbsp;(n.round),&nbsp;LOOKING&nbsp;(n.state),&nbsp;1&nbsp;(n.sid),&nbsp;LOOKING&nbsp;(my&nbsp;state)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,416&nbsp;-&nbsp;WARN&nbsp;&nbsp;[WorkerSender&nbsp;Thread:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/192.168.0.178:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:340)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:360)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:333)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;java.lang.Thread.run(Thread.java:662)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,420&nbsp;-&nbsp;WARN&nbsp;&nbsp;[WorkerSender&nbsp;Thread:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:340)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:360)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:333)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;java.lang.Thread.run(Thread.java:662)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,612&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/192.168.0.178:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,615&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:19,616&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697]&nbsp;-&nbsp;Notification&nbsp;time&nbsp;out:&nbsp;400&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,019&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/192.168.0.178:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,021&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,022&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697]&nbsp;-&nbsp;Notification&nbsp;time&nbsp;out:&nbsp;800&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,825&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/192.168.0.178:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,827&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:20,828&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697]&nbsp;-&nbsp;Notification&nbsp;time&nbsp;out:&nbsp;1600&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,435&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/192.168.0.178:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,439&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,441&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697]&nbsp;-&nbsp;Notification&nbsp;time&nbsp;out:&nbsp;3200&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,945&nbsp;-&nbsp;INFO&nbsp;&nbsp;[WorkerReceiver&nbsp;Thread:FastLeaderElection@496]&nbsp;-&nbsp;Notification:&nbsp;2&nbsp;(n.leader),&nbsp;0&nbsp;(n.zxid),&nbsp;1&nbsp;(n.round),&nbsp;LOOKING&nbsp;(n.state),&nbsp;2&nbsp;(n.sid),&nbsp;LOOKING&nbsp;(my&nbsp;state)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,946&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@721]&nbsp;-&nbsp;Updating&nbsp;proposal&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,949&nbsp;-&nbsp;WARN&nbsp;&nbsp;[WorkerSender&nbsp;Thread:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/192.168.0.177:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.ConnectException:&nbsp;Connection&nbsp;refused&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.checkConnect(Native&nbsp;Method)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:100)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:340)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:360)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:333)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;java.lang.Thread.run(Thread.java:662)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:22,951&nbsp;-&nbsp;INFO&nbsp;&nbsp;[WorkerReceiver&nbsp;Thread:FastLeaderElection@496]&nbsp;-&nbsp;Notification:&nbsp;2&nbsp;(n.leader),&nbsp;0&nbsp;(n.zxid),&nbsp;1&nbsp;(n.round),&nbsp;LOOKING&nbsp;(n.state),&nbsp;1&nbsp;(n.sid),&nbsp;LOOKING&nbsp;(my&nbsp;state)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,156&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@643]&nbsp;-&nbsp;FOLLOWING&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,170&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Learner@80]&nbsp;-&nbsp;TCP&nbsp;NoDelay&nbsp;set&nbsp;to:&nbsp;true&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,206&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:zookeeper.version=3.3.3-1203054,&nbsp;built&nbsp;on&nbsp;11/17/2011&nbsp;05:47&nbsp;GMT&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,207&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:host.name=slave-01&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,207&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.version=1.6.0_30&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,208&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.vendor=Sun&nbsp;Microsystems&nbsp;Inc.&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,208&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.home=/home/hadoop/installation/jdk1.6.0_30/jre&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,209&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.class.path=/home/hadoop/installation/zookeeper-3.3.4/bin/../build/classes:/home/hadoop/installation/zookeeper-3.3.4/bin/../build/lib/*.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../zookeeper-3.3.4.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/log4j-1.2.15.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/jline-0.9.94.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-lang-2.4.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-collections-3.2.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-cli-1.1.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/apache-rat-tasks-0.6.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/apache-rat-core-0.6.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../src/java/lib/*.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../conf:/home/hadoop/installation/jdk1.6.0_30/lib/*.jar:/home/hadoop/installation/jdk1.6.0_30/jre/lib/*.jar&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,210&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.library.path=/home/hadoop/installation/jdk1.6.0_30/jre/lib/i386/client:/home/hadoop/installation/jdk1.6.0_30/jre/lib/i386:/home/hadoop/installation/jdk1.6.0_30/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,210&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.io.tmpdir=/tmp&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,212&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:java.compiler=&lt;NA&gt;&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,212&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:os.name=Linux&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,212&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:os.arch=i386&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,213&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:os.version=3.0.0-14-generic&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,213&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:user.name=hadoop&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,214&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:user.home=/home/hadoop&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,214&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97]&nbsp;-&nbsp;Server&nbsp;environment:user.dir=/home/hadoop/installation/zookeeper-3.3.4&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,223&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:ZooKeeperServer@151]&nbsp;-&nbsp;Created&nbsp;server&nbsp;with&nbsp;tickTime&nbsp;2000&nbsp;minSessionTimeout&nbsp;4000&nbsp;maxSessionTimeout&nbsp;40000&nbsp;datadir&nbsp;/home/hadoop/storage/zookeeper/version-2&nbsp;snapdir&nbsp;/home/hadoop/storage/zookeeper/version-2&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,339&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Learner@294]&nbsp;-&nbsp;Getting&nbsp;a&nbsp;snapshot&nbsp;from&nbsp;leader&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,358&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:Learner@325]&nbsp;-&nbsp;Setting&nbsp;leader&nbsp;epoch&nbsp;1&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:23,358&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FileTxnSnapLog@254]&nbsp;-&nbsp;Snapshotting:&nbsp;0&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:25,511&nbsp;-&nbsp;INFO&nbsp;&nbsp;[WorkerReceiver&nbsp;Thread:FastLeaderElection@496]&nbsp;-&nbsp;Notification:&nbsp;3&nbsp;(n.leader),&nbsp;0&nbsp;(n.zxid),&nbsp;1&nbsp;(n.round),&nbsp;LOOKING&nbsp;(n.state),&nbsp;3&nbsp;(n.sid),&nbsp;FOLLOWING&nbsp;(my&nbsp;state)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:51:42,584&nbsp;-&nbsp;INFO&nbsp;&nbsp;[WorkerReceiver&nbsp;Thread:FastLeaderElection@496]&nbsp;-&nbsp;Notification:&nbsp;3&nbsp;(n.leader),&nbsp;0&nbsp;(n.zxid),&nbsp;2&nbsp;(n.round),&nbsp;LOOKING&nbsp;(n.state),&nbsp;3&nbsp;(n.sid),&nbsp;FOLLOWING&nbsp;(my&nbsp;state)&nbsp;&nbsp;</span></p></li>
</ol>
<p>我启动的顺序是slave-01&gt;slave-02&gt;slave-03，由于ZooKeeper集群启动的时候，每个结点都试图去连接集群中的其它结点，先启动的肯定连不上后面还没启动的，所以上面日志前面部分的异常是可以忽略的。通过后面部分可以看到，集群在选出一个Leader后，最后稳定了。<br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">其他结点可能也出现类似问题，属于正常。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>第六步：安装验证</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">可以通过ZooKeeper的脚本来查看启动状态，包括集群中各个结点的角色（或是Leader，或是Follower），如下所示，是在ZooKeeper集群中的每个结点上查询的结果：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-01:~/installation/zookeeper-3.3.4$&nbsp;bin/zkServer.sh&nbsp;status&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">JMX&nbsp;enabled&nbsp;by&nbsp;default&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Using&nbsp;config:&nbsp;/home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Mode:&nbsp;follower&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-02:~/installation/zookeeper-3.3.4$&nbsp;&nbsp;bin/zkServer.sh&nbsp;status&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">JMX&nbsp;enabled&nbsp;by&nbsp;default&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Using&nbsp;config:&nbsp;/home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Mode:&nbsp;leader&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-03:~/installation/zookeeper-3.3.4$&nbsp;&nbsp;bin/zkServer.sh&nbsp;status&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">JMX&nbsp;enabled&nbsp;by&nbsp;default&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Using&nbsp;config:&nbsp;/home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Mode:&nbsp;follower&nbsp;&nbsp;</span></p></li>
</ol>
<p>通过上面状态查询结果可见，slave-02是集群的Leader，其余的两个结点是Follower。<br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">另外，可以通过客户端脚本，连接到ZooKeeper集群上。对于客户端来说，ZooKeeper是一个整体（ensemble），连接到ZooKeeper集群实际上感觉在独享整个集群的服务，所以，你可以在任何一个结点上建立到服务集群的连接，例如：</p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">hadoop@slave-03:~/installation/zookeeper-3.3.4$&nbsp;bin/zkCli.sh&nbsp;-server&nbsp;slave-01:2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Connecting&nbsp;to&nbsp;slave-01:2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,068&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:zookeeper.version=3.3.3-1203054,&nbsp;built&nbsp;on&nbsp;11/17/2011&nbsp;05:47&nbsp;GMT&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,080&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:host.name=slave-03&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,085&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.version=1.6.0_30&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,089&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.vendor=Sun&nbsp;Microsystems&nbsp;Inc.&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,095&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.home=/home/hadoop/installation/jdk1.6.0_30/jre&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,104&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.class.path=/home/hadoop/installation/zookeeper-3.3.4/bin/../build/classes:/home/hadoop/installation/zookeeper-3.3.4/bin/../build/lib/*.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../zookeeper-3.3.4.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/log4j-1.2.15.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/jline-0.9.94.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-lang-2.4.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-collections-3.2.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/commons-cli-1.1.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/apache-rat-tasks-0.6.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../lib/apache-rat-core-0.6.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../src/java/lib/*.jar:/home/hadoop/installation/zookeeper-3.3.4/bin/../conf:/home/hadoop/installation/jdk1.6.0_30/lib/*.jar:/home/hadoop/installation/jdk1.6.0_30/jre/lib/*.jar&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,111&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.library.path=/home/hadoop/installation/jdk1.6.0_30/jre/lib/i386/client:/home/hadoop/installation/jdk1.6.0_30/jre/lib/i386:/home/hadoop/installation/jdk1.6.0_30/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,116&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.io.tmpdir=/tmp&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,124&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:java.compiler=&lt;NA&gt;&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,169&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:os.name=Linux&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,175&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:os.arch=i386&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,177&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:os.version=3.0.0-14-generic&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,185&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:user.name=hadoop&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,188&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:user.home=/home/hadoop&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,190&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:Environment@97]&nbsp;-&nbsp;Client&nbsp;environment:user.dir=/home/hadoop/installation/zookeeper-3.3.4&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,197&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main:ZooKeeper@379]&nbsp;-&nbsp;Initiating&nbsp;client&nbsp;connection,&nbsp;connectString=slave-01:2181&nbsp;sessionTimeout=30000&nbsp;watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@bf32c&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,305&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main-SendThread():ClientCnxn$SendThread@1061]&nbsp;-&nbsp;Opening&nbsp;socket&nbsp;connection&nbsp;to&nbsp;server&nbsp;slave-01/192.168.0.179:2181&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">Welcome&nbsp;to&nbsp;ZooKeeper!&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;07:14:21,376&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main-SendThread(slave-01:2181):ClientCnxn$SendThread@950]&nbsp;-&nbsp;Socket&nbsp;connection&nbsp;established&nbsp;to&nbsp;slave-01/192.168.0.179:2181,&nbsp;initiating&nbsp;session&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">JLine&nbsp;support&nbsp;is&nbsp;enabled&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">[zk:&nbsp;slave-01:2181(CONNECTING)&nbsp;0]&nbsp;2012-01-08&nbsp;07:14:21,872&nbsp;-&nbsp;INFO&nbsp;&nbsp;[main-SendThread(slave-01:2181):ClientCnxn$SendThread@739]&nbsp;-&nbsp;Session&nbsp;establishment&nbsp;complete&nbsp;on&nbsp;server&nbsp;slave-01/192.168.0.179:2181,&nbsp;sessionid&nbsp;=&nbsp;0x134bdcd6b730000,&nbsp;negotiated&nbsp;timeout&nbsp;=&nbsp;30000&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">WATCHER::&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">WatchedEvent&nbsp;state:SyncConnected&nbsp;type:None&nbsp;path:null&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">[zk:&nbsp;slave-01:2181(CONNECTED)&nbsp;0]&nbsp;ls&nbsp;/&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">[zookeeper]&nbsp;&nbsp;</span></p></li>
</ol>
<p>当前根路径为/zookeeper。<br><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<h2 style="margin:0px;font-size:1em;padding:0px;">总结说明</h2>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><strong>主机名与IP地址映射配置问题</strong></p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">启动ZooKeeper集群时，如果ZooKeeper集群中slave-01结点的日志出现如下错误：</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;"><br></p>
<p><strong>[plain]</strong>&nbsp;<a title="view plain" class="ViewSource" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif&quot;);background-position:0% 0%;" target="_blank">view plain</a><a title="copy" class="CopyToClipboard" href="http://blog.csdn.net/shirdrn/article/details/7183503#" style="color:rgb(160,160,160);text-decoration:none;border-style:none;font-size:9px;height:16px;width:16px;padding:1px;margin:0px 10px 0px 0px;text-indent:-2000px;background-image:url(&quot;http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif&quot;);background-position:0% 0%;" target="_blank">copy</a></p>
<ol style="border-style:none;color:rgb(92,92,92);padding:0px;margin-bottom:1px;margin-left:45px;background-color:rgb(255,255,255);" class="list-paddingleft-2">
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.SocketTimeoutException&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:109)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:37:46,026&nbsp;-&nbsp;INFO&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697]&nbsp;-&nbsp;Notification&nbsp;time&nbsp;out:&nbsp;6400&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:37:57,431&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;2&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-02/202.106.199.35:3888&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">java.net.SocketTimeoutException&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:109)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622)&nbsp;&nbsp;</span></p></li>
 <li><p><span style="border-style:none;color:#000000;padding:0px;margin:0px;">2012-01-08&nbsp;06:38:02,442&nbsp;-&nbsp;WARN&nbsp;&nbsp;[QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384]&nbsp;-&nbsp;Cannot&nbsp;open&nbsp;channel&nbsp;to&nbsp;3&nbsp;at&nbsp;election&nbsp;address&nbsp;slave-03/202.106.199.35:3888&nbsp;&nbsp;</span></p></li>
</ol>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">很显然，slave-01在启动时连接集群中其他结点（slave-02、slave-03）时，主机名映射的IP与我们实际配置的不一致，所以集群中各个结点之间无法建立链路，整个ZooKeeper集群启动是失败的。</p>
<p style="margin-top:0px;margin-bottom:0px;padding:0px;">上面错误日志中slave-02/202.106.199.35:3888实际应该是slave-02/202.192.168.0.178:3888就对了，但是在进行域名解析的时候映射有问题，修改每个结点的/etc/hosts文件，将ZooKeeper集群中所有结点主机名到IP地址的映射配置上。</p>
<p><br></p>
