<p style="text-indent:24px;"><span style="font-size:13px;font-family:consolas;">Hive</span><span style="font-size:13px;font-family:'宋体';">在连</span><span style="font-size:13px;font-family:consolas;">Zookeeper</span><span style="font-size:13px;font-family:'宋体';">时发现</span><span style="font-size:13px;font-family:consolas;">ZK</span><span style="font-size:13px;font-family:'宋体';">的日志里都是类似：</span></p>
<p style="text-indent:24px;"><span style="font-size:13px;font-family:consolas;">Gota Connection with timeout 40000ms</span></p>
<p style="text-indent:24px;"><span style="font-size:13px;font-family:consolas;">Hive</span><span style="font-size:13px;font-family:'宋体';">在获取锁创建</span><span style="font-size:13px;font-family:consolas;">ZK</span><span style="font-size:13px;font-family:'宋体';">连接时传入的默认</span><span style="font-size:13px;font-family:consolas;">sessionTimeout</span><span style="font-size:13px;font-family:'宋体';">是</span><span style="font-size:13px;font-family:consolas;">10min</span><span style="font-size:13px;font-family:'宋体';">，为什么到</span><span style="font-size:13px;font-family:consolas;">ZK Server</span><span style="font-size:13px;font-family:'宋体';">这里变成</span><span style="font-size:13px;font-family:consolas;">40s</span><span style="font-size:13px;font-family:'宋体';">呢？</span></p>
<p style="text-indent:24px;"><span style="font-size:13px;font-family:'宋体';">这和</span><span style="font-size:13px;font-family:consolas;">ZK</span><span style="font-size:13px;font-family:'宋体';">的默认配置有关，默认的配置只是有</span><span style="font-size:13px;font-family:consolas;">ticktime=2000ms</span><span style="font-size:13px;font-family:'宋体';">，而默认的</span><span style="font-size:13px;font-family:consolas;">minSessionTimeout=2*ticktime,maxSessionTimeout=20*ticktime</span><span style="font-size:13px;font-family:'宋体';">，因此，当</span><span style="font-size:13px;font-family:consolas;">Hive</span><span style="font-size:13px;font-family:'宋体';">连过来时由于</span><span style="font-size:13px;font-family:consolas;">10min &gt;&gt; maxSessionTimeout</span><span style="font-size:13px;font-family:'宋体';">，才有日志里面的结果</span><span style="font-size:13px;font-family:consolas;">.</span></p>
<p><br></p>
<p>本文出自 “<a href="http://boylook.blog.51cto.com">MIKE老毕的海贼船</a>” 博客，请务必保留此出处<a href="http://boylook.blog.51cto.com/7934327/1315758">http://boylook.blog.51cto.com/7934327/1315758</a></p>
